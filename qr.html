<!doctype html>
<html lang="no">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>QR â€“ TS-kalkulator</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans',sans-serif;margin:0;padding:16px;background:#f8fafc;color:#0f172a}
  .card{background:#fff;border:1px solid #e2e8f0;border-radius:16px;padding:16px;max-width:700px;margin:0 auto}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  input{flex:1;min-width:240px;padding:10px 12px;border-radius:12px;border:1px solid #e2e8f0;font:inherit}
  .btn{background:#00FFFF;border:1px solid #a0fefe;border-radius:10px;padding:10px 14px;cursor:pointer}
  img{display:block;margin:16px auto;border:1px solid #e2e8f0}
  .muted{color:#64748b}
</style>
</head>
<body>
  <div class="card">
    <h2>Lag QR-kode</h2>
    <div class="row">
      <input id="url" placeholder="https://">
      <button class="btn" id="make">Lag QR</button>
      <a class="btn" id="dl" download="ts-kalkulator-qr.png">Last ned PNG</a>
    </div>
    <img id="qr" width="0" height="0" alt="QR">
    <p class="muted">Tips: URL fylles automatisk fra siden du kom fra.</p>
  </div>
<script>
  const $ = (id) => document.getElementById(id);
  function build(u){ 
    const enc = encodeURIComponent((u||'').trim());
    const src = `https://api.qrserver.com/v1/create-qr-code/?size=512x512&margin=10&data=${enc}`;
    $('qr').src = src; $('qr').width = 256; $('qr').height = 256;
    $('dl').href = src;
  }
  $('make').addEventListener('click', ()=>{ if($('url').value) build($('url').value); });
  (function init(){
    const u = new URLSearchParams(location.search).get('u') || document.referrer || '';
    $('url').value = u; if(u) build(u);
  })();
</script>
</body>
</html>
